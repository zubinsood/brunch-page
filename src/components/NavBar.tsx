import React from 'react';
import Switch from './Switch';
import { useTheme } from '../contexts/ThemeContext';
import { useCart } from '../contexts/CartContext';

function NavBar() {
    const { isToggled, toggleTheme } = useTheme();
    const { cartCount } = useCart();

    console.log("Current theme:", isToggled ? "Dark" : "Light")
    console.log("Current count:", cartCount)

    return (
        <nav className="navbar">
            <div className="navbar-left">
                DAVELLE
            </div>
            <div className="navbar-right">
                <div className="cart-container">
                    {(cartCount > 0) && (cartCount < 4) ? (
                        <div className="cart-icon">
                        {isToggled ? (
                            // SVG for toggled state when cartCount > 0
                            <svg xmlns="http://www.w3.org/2000/svg" width="31" height="30" viewBox="0 0 31 30" fill="none">
                                <path d="M26.53 5.50304C29.4441 5.50304 31 7.02515 31 9.87424V23.3261C31 26.1752 29.4573 27.6843 26.8069 27.6843H14.333C15.1506 26.3833 15.6253 24.8612 15.6253 23.235C15.6253 18.4996 11.6563 14.5837 6.84347 14.5837V9.87424C6.84347 7.02515 8.3994 5.50304 11.3135 5.50304H13.0276C13.0804 2.47181 15.678 0 18.9217 0C22.1523 0 24.7631 2.47181 24.8158 5.50304H26.53ZM18.9217 2.49783C17.1548 2.49783 15.8626 3.82481 15.8099 5.50304H22.0204C21.9809 3.82481 20.6886 2.49783 18.9217 2.49783ZM6.85666 30C3.09868 30 0 26.9428 0 23.222C0 19.5273 3.09868 16.4701 6.85666 16.4701C10.6146 16.4701 13.7001 19.5273 13.7001 23.222C13.7001 26.9167 10.5751 30 6.85666 30Z" fill="#61C23E" />
                            </svg>
                        ) : (
                            // SVG for non-toggled state when cartCount > 0
                            <svg xmlns="http://www.w3.org/2000/svg" width="31" height="30" viewBox="0 0 31 30" fill="none">
                                <path d="M26.53 5.50304C29.4441 5.50304 31 7.02515 31 9.87424V23.3261C31 26.1752 29.4573 27.6843 26.8069 27.6843H14.333C15.1506 26.3833 15.6253 24.8612 15.6253 23.235C15.6253 18.4996 11.6563 14.5837 6.84347 14.5837V9.87424C6.84347 7.02515 8.3994 5.50304 11.3135 5.50304H13.0276C13.0804 2.47181 15.678 0 18.9217 0C22.1523 0 24.7631 2.47181 24.8158 5.50304H26.53ZM18.9217 2.49783C17.1548 2.49783 15.8626 3.82481 15.8099 5.50304H22.0204C21.9809 3.82481 20.6886 2.49783 18.9217 2.49783ZM6.85666 30C3.09868 30 0 26.9428 0 23.222C0 19.5273 3.09868 16.4701 6.85666 16.4701C10.6146 16.4701 13.7001 19.5273 13.7001 23.222C13.7001 26.9167 10.5751 30 6.85666 30Z" fill="#DC7890" />
                            </svg>
                        )}
                        <span className="cart-count">{cartCount}</span>
                        </div>
                    ) : (
                        isToggled ? (
                            // SVG for toggled state when cartCount = 0
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="30" viewBox="0 0 25 30" fill="none">
                                <path d="M0 25.2773V10.7002C0 7.61278 1.61026 5.96335 4.62609 5.96335H6.40011C6.45469 2.67857 9.14301 0 12.5 0C15.8433 0 18.5453 2.67857 18.5999 5.96335H20.3739C23.3897 5.96335 25 7.61278 25 10.7002V25.2773C25 28.3647 23.4034 30 20.6605 30H4.62609C1.61026 30 0 28.3647 0 25.2773ZM9.27948 5.96335H15.7069C15.6659 4.14474 14.3286 2.70677 12.5 2.70677C10.6714 2.70677 9.33406 4.14474 9.27948 5.96335ZM3.04312 24.9389C3.04312 26.2359 3.6845 26.8703 4.88537 26.8703H20.4012C21.3019 26.8703 21.9569 26.2359 21.9569 24.9389V11.0244C21.9569 9.72744 21.3019 9.10714 20.1146 9.10714H4.88537C3.6845 9.10714 3.04312 9.72744 3.04312 11.0244V24.9389Z" fill="#61C23E" />
                            </svg>
                        ) : (
                            // SVG for non-toggled state when cartCount = 0

                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="30" viewBox="0 0 25 30" fill="none">
                                <path d="M0 25.2773V10.7002C0 7.61278 1.61026 5.96335 4.62609 5.96335H6.40011C6.45469 2.67857 9.14301 0 12.5 0C15.8433 0 18.5453 2.67857 18.5999 5.96335H20.3739C23.3897 5.96335 25 7.61278 25 10.7002V25.2773C25 28.3647 23.4034 30 20.6605 30H4.62609C1.61026 30 0 28.3647 0 25.2773ZM9.27948 5.96335H15.7069C15.6659 4.14474 14.3286 2.70677 12.5 2.70677C10.6714 2.70677 9.33406 4.14474 9.27948 5.96335ZM3.04312 24.9389C3.04312 26.2359 3.6845 26.8703 4.88537 26.8703H20.4012C21.3019 26.8703 21.9569 26.2359 21.9569 24.9389V11.0244C21.9569 9.72744 21.3019 9.10714 20.1146 9.10714H4.88537C3.6845 9.10714 3.04312 9.72744 3.04312 11.0244V24.9389Z" fill="#DC7890" />
                            </svg>
                        )
                    )}
                </div>
                <Switch isToggled={isToggled} onToggle={toggleTheme} />
            </div>
        </nav>
    );
}

export default NavBar;